/* main stuff */
html {
	background: #FEE; /* (for debug) */
	color: var(--T-color);
	font: var(--T-font);
	line-height: normal;
	/* alternate glyphs for K and k (whatever) */
	font-feature-settings: "ss04" on;
}

* {
	/* disable ligatures like fi ffi etc.
		(doesn't affect real languages or emoji) */
	font-variant-ligatures: none !important;
}

.Markup {
	font: inherit;
}

body {
	background: var(--T-bg);
}

/***********
 ** Links **
 ***********/
:any-link {
	;text-decoration: none
}
:any-link {
	;color: var(--T-link-color)
}
:any-link:hover {
	;color: var(--T-link-hover-color)
	;text-decoration: underline
}
/* todo: make a special link bar class for links that contain other elements and a class for which of those should be underlined */
/* and make sure normal links are styled correctly too */

.entity-title {
	;font-weight: 500
}

/* todo: make class for dark bg elements */
.page-header :any-link {
	color: var(--link-invert-color);
}
.page-header :any-link:hover {
	color: var(--link-invert-hover-color);
}

/**********/

sup {vertical-align: super;}
sub {vertical-align: sub;}

/* logged in/out display */
html:not(.f-loggedIn) .loggedIn,
html.f-loggedIn .loggedOut {
	display: none;
}

/* border list things */
.bottomBorder,
.border-list > *:not(:last-child),
.border-list-2 > * {
	border-bottom: 1px solid var(--T-border-color);
}


/****************
 ** Title Pane **
 ****************/

.page-header {
	background: var(--databarbgcolor);
	color: var(--databartxtcolor);
}
.page-header .entity-title {
	font-weight: normal;
	color: var(--link-invert-color);
}
.page-header h1 .entity-title {
	color: var(--databartxtcolor);
	padding-right: 0.5rem;
}
.page-header h1 {
	font-size: 1.625em;
	font-weight: normal;
}
.page-header > :first-child { /* sidebar button ??? */
	display: inline-block;
	min-width: 0.3125rem;
}
#\$titlePane [data-view]:not(.shown) {
	;display: none !important
}
/* broken? */
.errorMode .page-header {
	color: var(--error-invert-bg);
	font: var(--T-monospace-font);
}

html.f-error .loadBG {
	background: var(--error-invert-bg);
}
html.f-loading .loadBG {
	background: var(--loading-invert-bg);
}
.loadBG/*, resize-handle*/ {
	transition: background 0.1s ease;
}
.header-buttons {
	display: inline-flex;
	flex-direction: column;
	flex-wrap: wrap;
	height: var(--bar-height);
}
.header-buttons > * {
	height: 50%;
	font-weight: bold;
	line-height: 100%;
	font-size: 0.875em;
	padding: 0 0.25em;
	border: 1px solid gray;
}


/* tabs */
tab-list {
	display: flex;
	flex-direction: row;
	width: 100%;
	border-bottom: 1px solid gray;
	border-top: 1px solid var(--T-border-color);
	background-color: var(--bar-bg) !important;
}
tab-list > button {
	flex-grow: 1;
	flex-basis: 0;
	height: 2rem;
	padding: 0;
	font-size: 1em;
	/*;border-top-left-radius: 5px;
	;border-top-right-radius: 5px;*/
	/*;border-style: solid;*/
	border-bottom-width: 0;
}
tab-list > button[aria-selected="true"] {
	/*;border-style: inset;*/
	border-bottom-color: var(--bar-bg);
	/*;border-top-left-radius: 3px;
	;border-top-right-radius: 3px;*/
}
tab-list > button img.avatar {
	width: auto;
	height: 100%;
}

/* sidebar */
sidebar-container {
	background: var(--T-bg);
	width: 30vw; /* just a default */
	min-width: 10vw;
	z-index: 20;
}
.registerBox {
	padding: 0.3125rem 0.5rem;
}
.closeSidebar {
	height: 2.3125rem;
}
.closeSidebar button {
	width: 100%;
}

#\$sidebarResize {
	box-shadow: var(--normal-shadow);
	z-index: 30;
}
#\$sidebar_tabs {
	/*;box-shadow: var(--normal-shadow)*/
	z-index: 30;
}
/* sidebar activity tabs */
.activity-scroller {
	padding-top: 0.1875rem;
}
#\$sidebarWatch {
	padding-top: 0;
}
.activity-page {
	;display: block
	;border-bottom: 1px solid var(--T-border-color)
	;border-top: 1px solid white
	;padding-left: 0.1875rem
	;padding-top: 1px
	;padding-bottom: 1px
	;background: var(--T-bg)
}
.activity-page-bottom {
	;display: flex
	;height: 1.5rem
}
.activity-watch {
	display: flex;
}
/* todo: the css/html for watch activity items is mostly a hack */
.activity-watch > .activity-page-bottom {
	flex-shrink: 2;
	flex-grow: 1;
}
.activity-watch > .activity-page-bottom > time {
	width: 100%;
	text-align: right;
	padding-left: 0.125em;
	text-overflow: clip;
}
.activity-page-bottom .avatar {
	;max-width: unset
}
activity-users {
	;text-align: right
	;white-space: pre
	;overflow-x: visible
	;padding-right: 0.1875rem
	;padding-left: 0.1875rem
}
/* sidebar settings tab items */
#\$localSettings > div {
	display: flex;
	flex-wrap: wrap;
	align-items: center;
}
#\$localSettings > div > * {
	flex-grow: 1;
	flex-shrink: 0;
	width: 49%;
	min-width: 6.5em;
}
#\$localSettings > div > :last-child {
	flex-grow: 1;
}
#\$localSettings > div > textarea {
	width: 100%;
	height: 5.1875em;
}
#\$localSettings > div > label {
	font-weight: 500;
	line-height: 1em;
	padding-bottom: .1875em;
}
#\$localSettings > div {
	column-gap: 0.1875rem;
	margin-bottom: 0.3125rem;
}

/* sidebar debug tab */
#\$debugInput {
	font: var(--T-monospace-font);
	resize: vertical;
	overflow-y: scroll;
	width: 100%;
}

.debugMessage {
	;background: var(--bar-bg)
	;padding: 2px 3px
}

.debugMessage > pre {
	;font: var(--T-monospace-font)
	;overflow-x: scroll
	;white-space: pre
	;border-bottom: 1px solid var(--T-border-color)
}

/* page link bars */
.linkBar {
	display: block;
	background: var(--T-bg);
	
	padding: 0.1875rem;
	padding-top: 0.125rem;
	
	border-bottom: 1px solid var(--T-border-color);
	border-top: 1px solid white;
}
.linkBar:focus {
	background: var(--bar-bg);
}

/*********
 ** Nav **
 *********/
.nav {
	background: var(--light-invert-bg);
	color: var(--databartxtcolor);
	--T-link-color: var(--link-invert-color);
	--T-link-hover-color: var(--link-invert-hover-color);
}
.nav > span {
	color: var(--databartxtcolor);
}

/**************
 ** Userlist **
 **************/
chat-pane .userlist2 {
	box-shadow: var(--normal-shadow);
	z-index: 4;
	border-bottom: 1px solid var(--T-border-color);
}
.userlist {
	background: var(--databarbgcolor);
	color: var(--T-color);
	border: 3px var(--databarbgcolor);
	border-style: solid none;
	/*background: var(--bar-bg);*/
}
.userlist .avatar {
	margin-left: 1px;
	border: 1px solid white;
	box-sizing: border-box;
	border-radius: 0;
	width: var(--bar-height);
	height: var(--bar-height);
}

resize-handle.userlist2 {
	display: flex;
	background: linear-gradient(var(--databarbgcolor) 0 var(--handle-width), var(--bar-bg) var(--handle-width));
	height: unset !important;
	/*min-height: unset;
	overflow: visible;
	contain: none;*/
}
.userlist2 > .userlist {
	border: none;
	box-sizing: content-box;
	background: var(--databarbgcolor);
	padding: 3px;
}


.avatar {
	border-radius: 3px;
	background: var(--T-avatar-bg);
	/*contain: none; /* so the :focus outline will appear, even though the <a> is small */
}
.status-idle > .avatar {
	filter: grayscale(1);
}

time {
	;font-size: 0.875em
	;color: var(--T-time-color)
	;vertical-align: baseline
}

.username {
	;font-weight: bold
	;line-height: 1.2
}
message-username { /* khhhh */
	;line-height: 1.2
}
/*******************
 ** Chat Messages **
 *******************/
message-block {
	;display: block
	;position: relative
	;box-sizing: content-box
	;--chat-gutter: 4rem
	;--chat-avatar-size: calc(var(--chat-gutter) - 0.5rem)
	;--chat-message-gap: 0.625rem
	;padding: 0 0.5rem
	;padding-top: var(--chat-message-gap)
	;min-height: var(--chat-avatar-size)
	;"border-left: 0.5em solid rgb(255,153,153)
	;font-size: 1em /* ? */
}
message-block > img.avatar {
	;display: inline-block
	;position: absolute
	;width: var(--chat-avatar-size)
	;height: var(--chat-avatar-size)
	;border: none ;" 1px solid #777
	;margin-right: calc(var(--chat-gutter) - var(--chat-avatar-size))
	;"background-color: transparent
	;"background-color: #AAB
}
message-block > .bigAvatar {
	;position: absolute
	;width: calc(var(--chat-gutter) + 0.5rem)
	;height: 100%
	;left: 0
	;top: 0
	;background-size: cover
	;background-position-x: center
	;background-position-y: top
	;background-repeat: no-repeat
}

message-block > message-header {
	;display: flex
	;flex-wrap: wrap-reverse
	;margin-left: var(--chat-gutter)
	;" make the timestamp go into margins if there's not enough space
	;min-height: calc(var(--chat-message-gap) + 1.1875rem) ;" 1.1875 = text line height
	;margin-top: calc(0rem - var(--chat-message-gap)) ;" the units on 0rem are required?
	;align-items: flex-start
}
message-block > message-header > time {
	;flex-grow: 1
	;text-align: right
	;font-weight: normal
	;color: var(--chat-dim-color)
	;"line-height: 1 ;" this looks better when the time wraps, since it takes up less space, but otherwise, means the time is aligned too low
}

message-contents {
	;display: block
	;min-height: 1.5rem ;" this is so the message controls always have somewhere to be shown
	;margin-block: 0.125rem
	;" do we need all these
	;overflow-y: hidden
	;background: var(--T-bg)
	
	;contain: none ;" because of overlapping with avatar
}

message-part {
	;overflow: visible
	;display: block
	;min-height: 1rem ;" this is so the message controls always have somewhere to be shown
	;padding-block: 0.125rem
	;padding-left: calc(var(--chat-gutter) + 0.1875rem)
	;--T-bg: transparent
}
message-part.edited {
	;" todo: fix this styling
	;" we may just need an extra container for message-parts...
	;padding-left: calc(var(--chat-gutter) + 0.1875rem - 2px)
	;border-left: 2px solid gray
	;"outline-left: 2px solid gray
}
message-part:focus {
	;background: var(--message-focus-bg)
	;outline: none
}
message-part.boundary-top {
	;border-top: 2px solid red
}
message-part.boundary-bottom {
	;border-bottom: 2px solid red
}

.real-name-label {
	;color: gray
}

message-controls {
	;display: inline-flex
	;position: absolute
	;width: var(--chat-gutter)
	;height: 1.3125rem
	;z-index: 9
	;" don't remove these prefixes
	;-webkit-user-select: none
	;-moz-user-select: none
	;user-select: none
}
message-controls > button {
	;flex-grow: 1
	;padding: 0
}
message-controls:hover + message-part {
	;background: var(--message-hover-bg)
}

.messageGap {
	;border: 1px dashed gray /*♥*/
	;margin-top: 0.3125rem
	;margin-bottom: 0.3125rem
}

.chat-bottom {
	height: 0.875rem; /* increased to 0.9rem because we moved message-block padding to top of element */
}

/* chat input */
.inputPane {
	align-items: stretch;
	background: var(--bar-bg);
}
view-root.f-editing .chatTextarea {
	background: var(--edit-textarea-bg);
}
.chatTextarea[disabled] {
	background: silver;
}
view-root.f-editing .hideWhenEdit,
view-root:not(.f-editing) .showWhenEdit {
	display: none;
}

/* editor */
.editor-textarea {
	;min-height: 3rem
	;overflow-y: scroll
	;resize: none
}
/*#\$editorPreviewPane {
	height: 50%;
}*/

/*********/

/* do we even need this */
.bottomSpacer {
	;height: 1.5rem
}


/* user page */

.userPageBox {
	;align-items: flex-start
	;"max-height: 40vh
	;overflow: auto
	;" todo: make this outside of scroller and have activity list scroll separately /* ??? */
}

.userPageAvatar {
	;display: inline-block
	;width: 10rem
	;height: 10rem
	;flex-shrink: 1
	;margin-bottom: 5px
	
	;box-shadow: 2px 2px 5px gray
	;position: relative
	;z-index: 2
}
.userPageAvatar > img {
	;width: 100%
	;height: 100%
}

.userPageBox .pageContents {
	;flex-basis: 0
}
.userPageContents {
	;flex-grow: 1
}

html:not(.f-myUserPage) .myUserPage {
	;display: none
}

/*@media (max-width: 700px) {
	/* this is broken /
	.userPageBox {
		;flex-direction: column
		;max-height: none
	}
	.userPageBox .userPageContents {
		;flex-basis: auto
		;width: 100%
	}
}*/


/************
 ** Button **
 ************/
button {
	cursor: pointer;
	font: inherit;
	font-size: 0.8125em;
	line-height: normal !important;
	
	border: var(--T-button-border);
	border-radius: 0px;
	padding: 0 0.5rem;
	
	background: var(--button-bg);
}
button:hover {
	background: var(--button-hover-bg);
}
button:disabled {
	color: var(--chat-dim-color); /*todo: proper color here */
	background: var(--button-disabled-bg);
}
button[aria-selected="true"] {
	backguijkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkiiiinround: var(--button-selected-bg);
	background: var(--button-selected-bg);
	box-shadow: 0px 1px 3px inset var(--button-shadow-color);
}
button:active {
	background: var(--button-selected-bg);
	box-shadow: 0px 1px 3px inset var(--button-shadow-color);
}
button:hover {
	box-shadow: 0px 0px 2px inset var(--button-shadow-color);
}

/* forms */
form-table > .label {
	font-weight: 500;
	text-align: right;
	padding-right: 0.5rem;
	align-self: center;
}
form-table > .field {
	;vertical-align: middle
}
form-table > .wide.label {
	;text-align: left
	;font-weight: 500
	;font-size: 1.1875em
}

/* what are these for? */
/* permissions editor i guess */
table {
	;border-collapse: collapse
}
th {
	;padding-left: 0.3125rem
	;padding-right: 0.3125rem
}
.permissionRow > th {
	;padding: 0
	;text-align: left
}
.permissionRow > td {
	;padding: 0
	;text-align: center
}
.permission-table thead th {
	;padding-left: 0.5rem
	;padding-right: 0.5rem
}
.permission-table td {
	;text-align: center
}
.permission-users td {
	;text-align: center
}
.permission-users th {
	;text-align: right
}

user-select {
	;display: block
}
/* inputs */
/* these elements's sizes are fucking weird and make no sense */
/*input:not([type]) {
	width: 12em;
}
input[type="number"] {
	width: 8em;
}*/
input[type="checkbox"] {
	max-width: 8em;
}
input, output, select, textarea {
	font: inherit;
	font-size: 0.875em;
	background-color: var(--T-bg);
	border: 2px solid var(--T-textarea-border-color);
	border-radius: 1px;
}
output {
	border-color: gray;
}
input, select { /* do we need this? */
	min-width: 0;
	max-width: 100%;
}
input, select, button, input::placeholder {
	color: var(--T-color);
}
select {
	border-left-width: 4px;
	border-bottom-left-radius: 3px;
	border-top-left-radius: 3px;
}
input[type="file"] {
	line-height: calc(var(--bar-height) - 4px);
}
input::file-selector-button {
	vertical-align: top;
	height: 100%;
	line-height: 1;
}
input::placeholder {
	font-style: italic;
	color: #80808099;
	padding-left: 0.3125rem;
}
input:invalid {
	background: var(--error-bg);
}

@keyframes focus-switch {
	from {
		outline-offset: -5px;
		outline-width: 5px;
	}
}
:focus {
	outline: var(--T-focus-outline);
	outline-width: 2px;
	outline-offset: -2px;
	animation-name: focus-switch;
	animation-duration: 0.1s;
	animation-timing-function: linear;
	outline-style: solid;
}

textarea {
	;max-width: 100%
	;border: 2px solid var(--T-textarea-border-color)
	;border-radius: 0;
	;box-shadow: 0.125rem 0.1875rem 0.3125rem -0.1875rem #0D0D0D80;
	;color: var(--T-color)
	;background: var(--T-bg)
	;white-space: break-spaces; /* optional */
}
textarea-container {
	;border: 2px solid var(--T-textarea-border-color)
	;padding: 5px
	;background: var(--T-bg)
}
textarea-container > textarea {
	height: 2.625em; /* should be approx. line-height * 2 */
	min-height: 2.625em;
	box-shadow: none;
	border-radius: 0;
}
textarea-container > textarea:focus {
	outline: 5px solid #878;
	outline-offset: 3px;
	border-radius: 0;
	animation-name: none;
}
textarea-container, textarea-container > textarea {
	;max-height: 25vh
}


/**********
 ** Page **
 **********/

.errorPage {
	padding: 0.1875rem;
}

button.voteButton[data-selected][data-vote="g"] {
	;background: linear-gradient(var(--bggreen), #eee)
}
button.voteButton[data-selected][data-vote="b"] {
	;background: linear-gradient(var(--bgred), #eee)
}
button.voteButton[data-selected][data-vote="o"] {
	;background: linear-gradient(var(--bgblue), #eee)
}

/* TODO FIX */
/* todo fix more! so this is an issue because vote buttons are now messed up by the button container insertion system, and ummm... something about classes.. ugh*/

/* hecko yo */
.pageContents {
	max-width: 100%;
	overflow-x: auto;
	padding: 1.5rem;
}

.pageContents.Markup h2,
.pageContents.Markup h3,
.pageContents.Markup h4,
.pageContents.Markup h5 {
	margin-left: -1.5rem;
	margin-right: -1.5rem;
	padding-left: 1rem;
	padding-right: 1rem;
}

.pageInfoPane {
	;padding-left: 0.3125rem
	;padding-right: 0.3125rem
	;border-bottom: 1px solid var(--T-border-color)
	;background: var(--bar-bg)
	;box-shadow: var(--normal-shadow)
}
/*   idk   */
.page-container:not(#a) {
	min-height: 0px;
	height: 40vh;
}

/* file viewer */

.fileThumbnail {
	;display: inline-block
	;width: 52px
	;height: 52px
	;cursor: pointer
}
.fileThumbnail > img {
	;box-sizing: content-box
	;max-width: 50px
	;max-height: 50px
	;border: 1px solid black
}
.fileView {
	;max-width: 100%
	;max-height: 100%
	;border: 1px solid black
}
.fileViewPane {
	;overflow: auto
}
html:not(.f-fileSelected) .fileSelected {
	;display: none
}

/***********
 ** Icons **
 ***********/
.iconBg {
	;background-repeat: no-repeat
	;background-size: contain
	;background-position: center
	;margin-left: 0.125rem
	;margin-right: 0.125rem
}

/* TODO: margin should be fullscreen mode by default, then disabled with @media (min-width) */ /* ? */

/* ehhh */
.half {
	;display: block
	;min-height: 1.125rem
	;line-height: 1.125rem
	;text-align: center
}
.half-label {
	;font-weight: bold
}

.image-box > img {
	;border: 1px solid black
}

.no-select {
	-webkit-user-select: none; user-select: none;
}


/* contain */
#\$sidebarBottom, .sidebarComment, #\$sidebarActivity > .linkBar {
	contain: strict;
}

.Markup {
	;"line-height: 1.2
	;overflow-y: hidden
	;overflow-x: auto
}

/* comment search results */
.comment-search-results > div > .linkBar {
	;background: var(--bar-bg)
}

/* websocket state indicator */
html[data-socket-state="opening"] .toggle-sidebar {
	;--button-bg: linear-gradient(#6fb7c0, #6fb7c0, blue)
}
/*html[data-socket-state="open"] #\$openSidebar {
	;--button-bg: linear-gradient(#3f9f5f, #3f9f5f, green)
}*/
html[data-socket-pending] .toggle-sidebar {
	;--button-bg: linear-gradient(#e0c87f, #e0c87f, yellow)
}
html[data-socket-state="dead"] .toggle-sidebar {
	;--button-bg: linear-gradient(#f86060, #f86060, red)
}

/* markup stuff */
.M-spoiler-label {
	contain: none; /* the focus outline wasnt showing, idk why */
}
.M-spoiler-label:focus {
	border-color: var(--T-box-bg);
}
.Markup img:focus {
	outline-offset: 0;
	outline-width: 1px;
	outline-style: dotted;
}
.Markup img, .Markup video {
	-webkit-transition: max-height 0.25s ease;
	transition: max-height 0.25s ease;
}
.Markup [data-big] {
	max-height: 60vh;
}

#\$fileImage {
	max-width: 100%;
	height: auto;
	max-height: 75vh;
}

.images-thumbnails img {
	cursor: pointer;
	height: 60px;
	width: 60px;
	/*background-color: gray;*/
}

.images-current {
	max-height: 100%;
	max-width: 100%;
	border: 1px solid gray;
}

.images-container {
	flex-grow: 1;
}

@media all and (max-width: 700px) {
	input, textarea {
		font-size: 1em;
	}
	/*message-block {
		--chat-gutter: 3rem;
	}*/
}

/* ios safari */
@supports (-webkit-touch-callout: none) {
	/* give space to the left so the cursor can reach there */
	textarea-container > textarea {
		padding-left: 2px;
		width: -webkit-fill-available; width: -moz-available; width: stretch;
	}
}

