<!DOCTYPE html>
<meta charset="utf-8">
<title>SmileBASIC Source 2</title>

<meta name=viewport content="width=device-width, initial-scale=1, height=device-height">
<link rel=icon sizes=16x16 href='resource/icon16.ico'>
<!-- compatibility -->
<link rel="shortcut icon" sizes=16x16 href="resource/icon16.png"> <!-- firefox -->
<link rel=icon sizes=32x32 href="resource/icon32.png"> <!-- chrome -->
<link rel=icon sizes=192x192 href="resource/iconbig.png"> <!-- large -->
<link rel=apple-touch-icon href="resource/iconbig.png"> <!-- large 2 -->
<link rel=image_src href="resource/iconbig.png"> <!-- large 3 -->

<!--START-->
<!-- this part will be replaced by the build script -->
<link rel=stylesheet href=resource/fonts.css>
<link rel=stylesheet href=style.css>
<link rel=stylesheet href=markup.css>
<link rel=stylesheet href=code.css>

<script src=fill.js></script>
<script src=entity.js></script>
<script src=request.js></script>

<script src="sbs2-markup/highlight.js"></script>
<script src="sbs2-markup/parse.js"></script>
<script src="sbs2-markup/render.js"></script>

<script src=draw.js></script>
<script src=view.js></script>
<script src=navigate.js></script>

<script src=main.js></script>
<!--END-->

<header class="titlePane bar rem2-3 loadBG" id="$titlePane">

	<a data-static-path="" class="textItem"><img class="item" src="resource/iconbig.png" alt="SBS"></a>
	<noscript>This web-site requires JavaScript</noscript>
	<span id=$pageTitle class="textItem pageTitle"></span>
	
	<a class="item pageMode" id=$pageChatLink>Chat</a>
	<a class="item chatMode" id=$pagePageLink>Page</a>
	<a class="textItem userMode loggedIn myUserPage" data-static-path=settings>Settings</a>
	
	<button class="editorMode item" id="$deletePage">DELETE</button>
	<button tabindex="-1" id=$editButton class="item canEdit">Edit</button>
	
	<div class="item loggedIn myUserPage">
		<div id=$userPageStatus class="textItem userMode"></div>
	</div>
	<input class="item editorMode" id="$titleInput" placeholder="Page Title" required>
	<input class="item cateditMode" id=$cateditTitle placeholder="Category Title" required>
	<button class="item editorMode" id=$submitEdit>Submit</button>
	<span class="cateditMode textItem">
		<button class="item" id=$cateditSubmit>Submit</button>
	</span>
	<label for=$watchCheck class="textItem pageItem loggedIn">Watching:</label>
	<input type=checkbox id=$watchCheck class="item pageItem loggedIn">
	<div class="pageCreate textItem rightAlign">
		<span class="textItem" id=$authorBox></span>
		<button id=$openSidebar class="item">|||</button>
	</div>
</header>

<div class="sideBarContainer grow" id="$sidebarContainer">
	<div class="m grow" id="$m">
		<div class="pathMode pathBar" id=$path></div>
		
		<div class="infoPane editorMode">
			<label for="$keywords">Keywords:</label><input placeholder="(space separated, optional)" id="$keywords"><br>
			<label for="$editPageType">Type:</label><input placeholder="@" id="$editPageType"><br>
			<label for="$editPageCategory">Category id:</label><input type="number" placeholder="id" id="$editPageCategory"><br>
			<b>Permissions:</b>
			<table>
				<thead><tr><th></th><th>View</th><th>Comment</th><th>Edit</th><th>Delete</th></tr></thead>
				<tbody id="$permissionBox"></tbody>
			</table>
			<input id="$permissionUserInput" placeholder="user ID" type="number"><button id="$permissionAddButton">Add</button><br>
			<label for="$markupSelect">Markup language:</label>
			<select id="$markupSelect">
				<option value="plaintext">plain text</option>
				<option value="12y">12-y documentation markup format</option>
				<option value="bbcode">bbcode</option>
			</select><button id="$markupUpdate">Update Preview</button>
		</div>

		<div class="searchMode">
			<input id="$searchInput"><button id="$searchButton">Search</button>
		</div>
		
		<div class="fileMode fileNav rem1-7 nav">
			<input type="file" id="$fileUpload" accept="image/*" class="item loggedIn">
			<span class="item" contenteditable="" id="$filePaste">paste image here</span>
		</div>

		<div class="fileMode fileBox bar" id="$fileBox">
		</div>

		<div class="fileMode">
			<button id="$fileUploadButton" class="fileUploading">Upload Image!</button>
			Click an image to select
			<div class="fileSelected">
				<button id="$setAvatarButton" class="loggedIn">Use As Avatar</button>
				<table class="form">
					<tr>
						<th>User:</th>
						<td id="$fileUser"></td>
					</tr>
					<tr>
						<th><label for="$fileName">Name:</label></th>
						<td><input id="$fileName"></td>
					</tr>
					<tr>
						<th><label for="$fileName">Permissions:</label></th>
						<td><input id="$filePermissions"><br></td>
					</tr>
					<tr>
						<th><label for="$fileName">Values:</label></th>
						<td><input id="$fileValues"></td>
					</tr>
				</table>
				<button id=$fileUpdateButton class="fileUpdateButton canEdit loggedIn">Save Settings</button>
			</div>
		</div>
		
		<div class="activityMode categoryNav rem1-7 nav bar">
		</div>
		
		<div class="membersMode memberNav nav bar rem1-7" id=$memberNav></div>

		<div class="userPageBox userMode">
			<a id=$userPageAvatarLink><img id=$userPageAvatar class="userPageAvatar avatar" alt="" src="about:blank"></a>
			<div class="pageContents pre userPageContents markup-root" id=$userPageContents></div>
		</div>

		<!--
			  These panes have the main content
			  one of them will be visible at a time, depending on the view mode
		-->
		
		<main class="grow">
			<div class="searchMode" id="$searchResults"></div>
			
			<div class="cateditMode">
				<label for="$cateditPinned">Pinned pages:</label><input id="$cateditPinned"><br>
				<label for="$cateditCategory">Parent category:</label><input id="$cateditCategory" type="number"><br>
				<label for="$cateditPermissions">Permissions:</label><input id="$cateditPermissions"><br>
				<label for="$cateditLocalSupers">Local Superusers:</label><input id="$cateditLocalSupers"><br>
				<textarea id="$cateditDescription"></textarea><br>
			</div>
			
			<div id="$categoryDescription" class="categoryDescription pre pageContents categoryMode markup-root"></div>
			<div id="$categoryCategories" class="categoryMode"></div>
			<div id="$categoryPinned" class="categoryMode"></div>
			<div class="categoryMode categoryNav rem1-7 bar">
				<span id=$categoryNav></span>
				<a id=$createPage class="item categoryMode">Create Page</a>
			</div>
			<div id="$categoryPages" class="categoryPages categoryMode"></div>

			<div class="userActivity userMode" id="$userActivity"></div>

			<div class="pageMode pageWhatever">
				<span class="textItem pageMode" id=$voteBox>
					<button class="item" id=$voteButton_b data-vote="b">Bad<br><span id=$voteCount_b>x</span></button>
					<button id="$voteButton_o" class="item" data-vote="o">Ok<br><span id=$voteCount_o>x</span></button>
					<button id="$voteButton_g" class="item" data-vote="g">Great<br><span id=$voteCount_g>x</span></button>
				</span>
			</div>
			
			<div class="pageInfoPane pageMode px40" id="$pageInfoPane">
				
				<span id="$gallery" class="gallery" style="display:none;">
					<span class="metaInfo">
						<span id="$metaKey" class="textItem"></span>
						<span id="$sbapiInfo" class="textItem"></span>
					</span>
					<!-- here we can put
						  tags, type, sb key info, etc.
					-->
				</span>
			</div>
			<div class="pageContents pre pageMode markup-root" id="$pageContents"></div>
			<div class="editorPane editorMode">
				<div class="editorTextarea">
					<textarea id="$editorTextarea" minlength="2" required=""></textarea>
				</div>
				<div class="editorPreview grow markup-root" id="$editorPreview"><div class="markup-root" ></div></div>
			</div>
			
			<div class="homeMode homePane">
				<a class="linkBar bar rem2-3" data-static-path=search><span class="textItem">Search</span></a>
				<a class="linkBar bar rem2-3" data-static-path=category/0><span class="textItem">Pages</span></a>
				<a class="linkBar bar rem2-3" data-static-path=users><span class="textItem">Users</span></a>
				<a class="linkBar bar rem2-3" data-static-path=files><span class="textItem">Images</span></a>
				<a class="linkBar bar rem2-3" data-static-path=test><span class="textItem">Test</span></a>
				<a class="linkBar bar rem2-3" data-static-path=settings><span class="textItem">User Settings</span></a>
			</div>
			<div class="membersMode memberPane">
				<div id=$memberList></div>
			</div>

			<div class="settingsMode loggedOut">
				<div class="registerBox">
					<h2>Log In</h2>
					<form id=$loginForm>
						<input placeholder="Username" name="username" type="username"><br>
						<input placeholder="Password" name="password" type="password"><br>
						<button name="login" onclick="event.preventDefault()">Log In</button>
					</form>
					<div id="$loginError"></div>
				</div>
				<div class="registerBox">
					<h2>Register</h2>
					<form id="$registerForm" autocomplete="off">
						<input placeholder="Username" name="username" id=$registerUsername minlength="3" maxlength="20"> 3 to 20 characters, no spaces<br>
						<input placeholder="Password" name="password" type="password" id=$registerPassword minlength="8"><input placeholder="Confirm Password" name="password2" type="password" id=$registerPassword2 minlength="8"> At least 8 characters<br>
						<input placeholder="Email" name="email" type="email" id=$registerEmail><input placeholder="Confirm Email" name="email2" type="email" id=$registerEmail2> Confirmation code will be sent<br>
						<button id="$registerButton" onclick="event.preventDefault()">Register</button></form>
					<button id="$resendEmail" onclick="event.preventDefault()">Resend Email</button>
					<div id="$registerError" class="pre"> </div>
					<h3>Confirm Registration</h3>
					<input placeholder="Confirmation Code" id="$emailCode">
					<button id="$registerConfirm">Confirm</button>
				</div>
			</div>

			<div class="settingsMode loggedIn">
				<button id=$logOut>Log out</button><br>
				Change account settings: <br>
				<table class="form">
					<tr><td><label for="$settingsOldPassword">Old Password: </label></td><td><input type="password" id="$settingsOldPassword" required=""></td></tr>
						<tr><td><label for="$settingsUsername">New Username (Optional): </label></td><td><input autocomplete="off" id="$settingsUsername"></td></tr>
						<tr><td><label for="$settingsNewPassword">New Password (Optional): </label></td><td><input autocomplete="new-password" type="password" id="$settingsNewPassword"></td></tr>
						<tr><td><label for="$settingsEmail">New Email (Optional): </label></td><td><input autocomplete="off" type="email" id="$settingsEmail"></td></tr>
				</table>
				<button id="$submitUserSettings">Save</button>
				<hr>
				<a data-static-path=files>Change your avatar here</a>
			</div>

			<div class="activityMode" id="$activity"></div>

			<div class="fileMode fileViewPane grow">
				<img id="$fileView" class="fileView" src="about:blank" alt="">
			</div>

			<div class="testMode">
				<textarea id="$testTextarea"></textarea><br>
				<button id="$testButton">Run</button><br>
				<div id="$testOut" class="pre"></div>
			</div>
			
			<div id="$messageList" class="messageList chatMode grow"></div>
		</main>
		<div class="inputPane chatMode">
			<table> <!-- YES it's a TABLE! sorry ... I'm not allowed to use flex so this is the only option -->
				<tr>
					<td rowspan="2" class="tableGrow"><textarea class="chatTextarea" id="$chatTextarea" accesskey="z"></textarea></td>
					<td rowspan="2"><button class="chatSend fill" id="$chatSend">Send</button></td>
					<td style="white-space: nowrap"><button class="hideWhenEdit chatSend" id=$chatEdit>Edit</button><button class="chatSend hideWhenEdit" id=$chatDelete>Delete</button><button class="chatSend showWhenEdit" id="$cancelEdit">Cancel Edit</button></td>
				</tr>
				<tr>
					<td><select class="fill" id="$chatMarkupSelect" name="markup"><option value="plaintext">Plaintext</option><option value="12y">12y</option><option value="bbcode">BBCode</option></select></td>
				</tr>
			</table>
		</div>
		<!--
			  Bottom of the page
		-->
	</div>
	<div id="$sidebar">
		<div class="sidebarInside">
			<div class="loggedIn bar rem1-5" id=$loggedIn>
				<a class="item userLink" id=$myUserLink>
					<span class="myName username textItem" id=$myName></span>
					<img class="myAvatar item avatar" id=$myAvatar alt="" src="about:blank">
				</a>
			</div>
			<div class="loggedOut textItem"><a data-static-path=settings class="textItem">Log In or Register</a></div>
			
			<button class="closeSidebar" id=$closeSidebar>Close Sidebar</button>
			<div id="$sidebarPinned"></div>
			
			<div id="$sidebarPinnedResize" class="resize">resize</div>
			
			<div id="$sidebarActivity" class="grow"></div>
			<div id="$sidebarUserlist" class="userlist bar rem1-5"></div>
			<span id="$longPollStatus"></span>
			<button id="$hideGlobalStatusButton">Hide (global)</button>
			<!--<div id="buttonContainer"><button id="$hideAllStatusButton">Hide (everywhere)</button></div>-->
		</div>
	</div>
</div>
